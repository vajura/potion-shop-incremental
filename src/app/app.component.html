<div class="main-size-wrapper p-0 m-0">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 p-0">
        <ngb-tabset [destroyOnHide]="'false'">
          <ngb-tab>
            <ng-template ngbTabTitle>Wilderness</ng-template>
            <ng-template ngbTabContent>
              <div class="wilderness-container f-r-normal">
                <div class="world-map">
                  <div *ngFor="let wilderness of game.wilderness; let i = index"
                       class="map-button {{'map-button-' + i}} {{mapIconAnimationToggle ? 'map-button-' + i + '-animation' : ''}}"
                       ngbTooltip="{{wilderness.name}}"
                       (click)="selectWilderness(i)">
                    <div class="fa fa-pagelines"></div>
                  </div>
                </div>
                <div class="world-map-menu f-c-between">
                  <div class="world-map-menu-item">
                    <div class="standard-text text-center">{{game.wilderness[game.selectedWildernessIndex].name}}</div>
                    <div class="panel-background">
                      <div class="standard-text mt-1">Possible Seeds:</div>
                      <div *ngFor="let seed of game.wilderness[game.selectedWildernessIndex].wildSeeds"
                           class="standard-text p-1"
                           [ngStyle]="{'background': getSeed(seed.seedIndex).color1, 'color': getSeed(seed.seedIndex).color2}">
                        - {{getSeed(seed.seedIndex).name}}
                      </div>
                    </div>
                    <div class="panel-background">
                      <div class="standard-text mt-3">Golem groups {{game.wilderness[game.selectedWildernessIndex].golems.length}}/{{game.wilderness[game.selectedWildernessIndex].maxGolemGroups}}:</div>
                      <div *ngIf="game.wilderness[game.selectedWildernessIndex].golems.length == 0">
                        <div class="standard-text text-center">None</div>
                      </div>
                      <div *ngFor="let golem of game.wilderness[game.selectedWildernessIndex].golems; let i = index"
                           class="p-1 mt-1 golem-container"
                           [ngStyle]="{'background': golem.color1, 'color': golem.color2}">
                        <div class="fa fa-times golem-close-button" (click)="removeGolemGroup(i)"></div>
                        <div class="standard-text">{{golem.amount}} {{golem.name}}</div>
                        <div class="standard-text">HP: {{golem.currentHp}}/{{golem.maxHp}}</div>
                      </div>
                    </div>
                    <div class="panel-background mt-2">
                      <div class="standard-text">Mana cost: {{getTotalManaCost()}}</div>
                      <div class="standard-text">Gold cost: {{getTotalGoldCost()}}</div>
                    </div>
                  </div>
                  <div class="world-map-menu-item">
                    <div class="btn btn-primary send-golems-button"
                         (click)="openGolemSelection(golemSelectionModal)">Send Golems</div>
                  </div>
                </div>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab>
            <ng-template ngbTabTitle>Garden</ng-template>
            <ng-template ngbTabContent>
              <div *ngFor="let pot of game.pots"
                   class="pot-row f-r-normal"
                   [ngStyle]="{'border': '1px solid ' + pot.color1}">
                <div class="pot-box-description f-c-between"
                     [ngStyle]="{'border-right': '1px solid ' + pot.color1}">
                  <div class="width100">
                    <div class="standard-text text-center">{{pot.name}}</div>
                    <div class="standard-text">Free/Total: {{pot.freePots}}/{{pot.amount}}</div>
                  </div>
                  <div class="plant-button-container">
                    <div class="btn btn-success plant-button">Info</div>
                    <div class="btn btn-primary plant-button">Plant</div>
                  </div>
                </div>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab>
            <ng-template ngbTabTitle>Shop</ng-template>
            <ng-template ngbTabContent>
              <div>TESTdwdw1</div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>
    </div>
    <div class="row stats-window">
      <div class="col-md-12 p-0">
        <div class="f-r-normal">
          <div class="info-window-column f-c-normal">
            <div class="standard-text">Mana: {{game.currentMana}}/{{game.maxMana}} ({{game.manaRegen}}/s)</div>
            <div class="standard-text">Gold: {{game.gold}}</div>
          </div>
          <div class="info-window-column f-c-normal">
            <div *ngFor="let seed of game.seeds; let i = index"
                 class="standard-text">{{seed.name}}: {{seed.amount}}</div>
          </div>
          <div class="info-window-column f-c-normal">
            <div *ngFor="let plant of game.plants; let i = index"
                 class="standard-text">{{plant.name}}: {{plant.amount}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #golemSelectionModal let-c="close">
  <div class="modal-body">
    <div class="row">
      <div class="col-md-12">
        <div class="standard-text text-center">Send golem group</div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="f-r-normal">
          <div class="standard-text mt-2 mr-3">Select golem:</div>
          <button *ngFor="let golem of getGolemCollection(); let i = index"
                  type="button"
                  class="btn btn-primary"
                  [ngStyle]="{'background': golem.color1, 'color': golem.color2, 'border': 'none'}"
                  (click)="selectGolem(i)">
            {{golem.name}}
          </button>
        </div>
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-md-12">
        <div class="f-r-normal">
          <div class="standard-text mt-2"
               style="width: 126px;">Select amount:</div>
          <div class="input-group">
            <div class="input-group-prepend">
              <button class="btn btn-outline-light" type="button" aria-disabled="true" (click)="addAmount(-100)">-100</button>
              <button class="btn btn-outline-light" type="button" aria-disabled="true" (click)="addAmount(-10)">-10</button>
              <button class="btn btn-outline-light" type="button" aria-disabled="true" (click)="addAmount(-1)">-1</button>
            </div>
            <input type="text" class="number-input" [(ngModel)]="golemAmount">
            <div class="input-group-append">
              <button class="btn btn-outline-light" type="button" aria-disabled="true" (click)="addAmount(1)">+1</button>
              <button class="btn btn-outline-light" type="button" aria-disabled="true" (click)="addAmount(10)">+10</button>
              <button class="btn btn-outline-light" type="button" aria-disabled="true" (click)="addAmount(100)">+100</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-md-12">
        <div class="f-c-normal"
             style="height: 200px;">
          <div class="standard-text mt-2 mr-3">Mana cost: {{getManaCost()}}</div>
          <div class="standard-text mt-2 mr-3">Gold cost: {{getGoldCost()}}</div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="c('Close click')">Close</button>
    <button type="button" class="btn btn-primary" (click)="c('Close click')">Send Golems</button>
  </div>
</ng-template>
